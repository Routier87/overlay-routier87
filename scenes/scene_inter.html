<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Intermission - routier87</title>
    <style>
        /* ===== RESET & BASE ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: white;
            overflow: hidden;
            width: 1920px;
            height: 1080px;
            position: relative;
            background: transparent;
        }

        /* ===== FOND ANIM√â INTERMISSION ===== */
        .inter-bg {
            position: absolute;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 30%, rgba(33, 150, 243, 0.15) 0%, transparent 40%),
                radial-gradient(circle at 80% 70%, rgba(66, 165, 245, 0.15) 0%, transparent 40%),
                linear-gradient(135deg, 
                    rgba(10, 15, 30, 0.95) 0%,
                    rgba(20, 25, 50, 0.9) 50%,
                    rgba(10, 15, 30, 0.95) 100%);
            background-size: 400% 400%;
            animation: interGradient 20s ease infinite;
        }

        @keyframes interGradient {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        /* ===== √âL√âMENTS DE CARTE ANIM√âS ===== */
        .map-elements {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .road {
            position: absolute;
            width: 80%;
            height: 8px;
            background: linear-gradient(to right, 
                transparent 0%,
                #FFAA00 20%,
                #FFAA00 80%,
                transparent 100%);
            top: 50%;
            left: 10%;
            transform: translateY(-50%);
            animation: roadFlow 4s linear infinite;
        }

        @keyframes roadFlow {
            0% { background-position: 0% 0; }
            100% { background-position: 200% 0; }
        }

        .road-line {
            position: absolute;
            width: 100%;
            height: 2px;
            background: repeating-linear-gradient(
                to right,
                transparent,
                transparent 20px,
                white 20px,
                white 40px
            );
            top: 50%;
            left: 0;
            transform: translateY(-50%);
            animation: lineMove 2s linear infinite;
        }

        @keyframes lineMove {
            0% { transform: translateY(-50%) translateX(0); }
            100% { transform: translateY(-50%) translateX(-40px); }
        }

        .car-marker {
            position: absolute;
            top: 48%;
            left: 30%;
            font-size: 3em;
            animation: carBounce 2s ease-in-out infinite;
            filter: drop-shadow(0 0 10px rgba(255, 100, 0, 0.7));
        }

        @keyframes carBounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        /* ===== CONTENU PRINCIPAL ===== */
        .inter-container {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 100px 50px 50px;
            z-index: 100;
            animation: containerAppear 1s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        @keyframes containerAppear {
            0% { 
                opacity: 0;
                transform: translateY(50px) scale(0.9);
            }
            100% { 
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .inter-icon {
            font-size: 6em;
            margin-bottom: 30px;
            animation: iconFloat 4s ease-in-out infinite;
            filter: drop-shadow(0 5px 15px rgba(33, 150, 243, 0.5));
        }

        @keyframes iconFloat {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            25% { transform: translateY(-20px) rotate(5deg); }
            50% { transform: translateY(-10px) rotate(-5deg); }
            75% { transform: translateY(-15px) rotate(3deg); }
        }

        .inter-title {
            font-size: 5.5em;
            font-weight: 900;
            margin-bottom: 20px;
            background: linear-gradient(135deg, #2196F3 0%, #64B5F6 50%, #2196F3 100%);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 3px 3px 0 rgba(0, 0, 0, 0.3);
            animation: titleShimmer 3s linear infinite;
            position: relative;
        }

        @keyframes titleShimmer {
            0% { background-position: 0% center; }
            100% { background-position: 200% center; }
        }

        .inter-title::after {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 25%;
            width: 50%;
            height: 4px;
            background: linear-gradient(to right, transparent, #2196F3, transparent);
            animation: titleLine 3s ease-in-out infinite;
        }

        @keyframes titleLine {
            0%, 100% { width: 50%; left: 25%; opacity: 0.7; }
            50% { width: 60%; left: 20%; opacity: 1; }
        }

        .inter-subtitle {
            font-size: 3em;
            margin-bottom: 40px;
            opacity: 0.95;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            background: rgba(0, 0, 0, 0.3);
            padding: 15px 30px;
            border-radius: 15px;
            border: 2px solid rgba(33, 150, 243, 0.3);
        }

        /* ===== STATISTIQUES ANIM√âES ===== */
        .stats-container {
            display: flex;
            gap: 50px;
            margin: 40px 0;
            animation: statsAppear 1s ease-out 0.5s both;
        }

        @keyframes statsAppear {
            0% { 
                opacity: 0;
                transform: translateY(30px);
            }
            100% { 
                opacity: 1;
                transform: translateY(0);
            }
        }

        .stat-card {
            background: linear-gradient(135deg, 
                rgba(33, 150, 243, 0.2) 0%, 
                rgba(66, 165, 245, 0.1) 100%);
            padding: 25px 40px;
            border-radius: 20px;
            min-width: 200px;
            border: 2px solid rgba(33, 150, 243, 0.4);
            backdrop-filter: blur(10px);
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }

        .stat-card:hover {
            transform: translateY(-10px) scale(1.05);
            background: linear-gradient(135deg, 
                rgba(33, 150, 243, 0.3) 0%, 
                rgba(66, 165, 245, 0.2) 100%);
            box-shadow: 0 15px 30px rgba(33, 150, 243, 0.2);
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.1), 
                transparent);
            transition: left 0.7s;
        }

        .stat-card:hover::before {
            left: 100%;
        }

        .stat-icon {
            font-size: 2.5em;
            margin-bottom: 15px;
            color: #64B5F6;
        }

        .stat-value {
            font-size: 2.8em;
            font-weight: bold;
            color: #2196F3;
            margin-bottom: 5px;
            font-family: 'Courier New', monospace;
        }

        .stat-label {
            font-size: 1.4em;
            opacity: 0.9;
        }

        /* ===== MESSAGE PRINCIPAL ===== */
        .inter-message {
            font-size: 2.2em;
            max-width: 1000px;
            line-height: 1.6;
            margin: 40px 0;
            padding: 30px 50px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 25px;
            backdrop-filter: blur(15px);
            border: 3px solid rgba(33, 150, 243, 0.4);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
            animation: messagePop 1s ease-out 0.8s both;
        }

        @keyframes messagePop {
            0% { 
                opacity: 0;
                transform: scale(0.8) rotate(-2deg);
            }
            100% { 
                opacity: 1;
                transform: scale(1) rotate(0deg);
            }
        }

        /* ===== VOTES & INTERACTION ===== */
        .vote-container {
            display: flex;
            gap: 40px;
            margin-top: 30px;
            animation: voteAppear 1s ease-out 1s both;
        }

        .vote-option {
            background: linear-gradient(135deg, 
                rgba(76, 175, 80, 0.2) 0%, 
                rgba(56, 142, 60, 0.1) 100%);
            padding: 25px 35px;
            border-radius: 20px;
            border: 2px solid rgba(76, 175, 80, 0.4);
            backdrop-filter: blur(10px);
            transition: all 0.4s ease;
            cursor: pointer;
            min-width: 250px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .vote-option:hover {
            transform: translateY(-8px);
            background: linear-gradient(135deg, 
                rgba(76, 175, 80, 0.3) 0%, 
                rgba(56, 142, 60, 0.2) 100%);
            box-shadow: 0 15px 30px rgba(76, 175, 80, 0.2);
        }

        .vote-percentage {
            font-size: 2em;
            font-weight: bold;
            color: #4CAF50;
            margin-top: 10px;
            font-family: 'Courier New', monospace;
        }

        /* ===== PROGRESSION TEMPS ===== */
        .inter-progress {
            width: 800px;
            height: 12px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 6px;
            margin-top: 40px;
            overflow: hidden;
            border: 2px solid rgba(33, 150, 243, 0.3);
            position: relative;
        }

        .inter-progress-bar {
            height: 100%;
            background: linear-gradient(to right, #2196F3, #64B5F6);
            width: 30%;
            border-radius: 6px;
            animation: progressMove 5s ease-in-out infinite alternate;
            position: relative;
        }

        .inter-progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.2), 
                transparent);
            animation: progressShine 2s linear infinite;
        }

        @keyframes progressMove {
            0% { width: 30%; }
            100% { width: 70%; }
        }

        @keyframes progressShine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* ===== PARTICULES ===== */
        .particles-inter {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .particle {
            position: absolute;
            width: 10px;
            height: 10px;
            background: rgba(33, 150, 243, 0.3);
            border-radius: 50%;
            animation: particleFloat 10s linear infinite;
        }

        @keyframes particleFloat {
            0% {
                transform: translateY(1080px) translateX(calc(var(--x) * 1920px));
                opacity: 0;
            }
            10% {
                opacity: 0.8;
            }
            90% {
                opacity: 0.8;
            }
            100% {
                transform: translateY(-100px) translateX(calc(var(--x) * 1920px + 100px));
                opacity: 0;
            }
        }

        /* ===== FOOTER ===== */
        .inter-footer {
            position: absolute;
            bottom: 40px;
            left: 0;
            width: 100%;
            text-align: center;
            font-size: 1.6em;
            padding: 15px;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(33, 150, 243, 0.1) 20%, 
                rgba(33, 150, 243, 0.1) 80%, 
                transparent);
            border-top: 2px solid rgba(33, 150, 243, 0.3);
            border-bottom: 2px solid rgba(33, 150, 243, 0.3);
            animation: footerSlide 15s linear infinite;
        }

        @keyframes footerSlide {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }
    </style>
</head>
<body>
    <!-- Fond anim√© -->
    <div class="inter-bg"></div>

    <!-- √âl√©ments de carte -->
    <div class="map-elements">
        <div class="road"></div>
        <div class="road-line"></div>
        <div class="car-marker">üöõ</div>
        
        <!-- Signaux routiers -->
        <div class="road-sign" style="top: 30%; left: 20%; animation-delay: 0s;">üõë</div>
        <div class="road-sign" style="top: 40%; left: 60%; animation-delay: 1s;">üîÑ</div>
        <div class="road-sign" style="top: 60%; left: 40%; animation-delay: 2s;">‚ö†Ô∏è</div>
    </div>

    <!-- Particules -->
    <div class="particles-inter" id="particles-container"></div>

    <!-- Contenu principal -->
    <div class="inter-container">
        <div class="inter-icon">üõ£Ô∏è</div>
        <h1 class="inter-title">CHANGEMENT DE PARCOURS</h1>
        <h2 class="inter-subtitle">routier87 consulte la carte</h2>

        <!-- Statistiques -->
        <div class="stats-container">
            <div class="stat-card">
                <div class="stat-icon">üéÆ</div>
                <div class="stat-value" id="stat-game">TrackMania</div>
                <div class="stat-label">Jeu actuel</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">‚è±Ô∏è</div>
                <div class="stat-value" id="stat-time">2h 15m</div>
                <div class="stat-label">Temps de jeu</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üë•</div>
                <div class="stat-value" id="stat-viewers">42</div>
                <div class="stat-label">Spectateurs</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üèÜ</div>
                <div class="stat-value" id="stat-record">1:24.56</div>
                <div class="stat-label">Meilleur temps</div>
            </div>
        </div>

        <!-- Message principal -->
        <div class="inter-message">
            On fait le point sur la route parcourue et on planifie la suite. 
            <span style="color: #64B5F6; font-weight: bold;">Vos suggestions pour la prochaine destination ?</span> 
            C'est le moment de voter pour le prochain jeu ou challenge !
        </div>

        <!-- Options de vote -->
        <div class="vote-container">
            <div class="vote-option" onclick="voteFor(1)">
                <div class="stat-icon">üöó</div>
                <div class="stat-label">TrackMania</div>
                <div class="vote-percentage" id="vote-1">35%</div>
            </div>
            <div class="vote-option" onclick="voteFor(2)">
                <div class="stat-icon">üöö</div>
                <div class="stat-label">Euro Truck Sim 2</div>
                <div class="vote-percentage" id="vote-2">45%</div>
            </div>
            <div class="vote-option" onclick="voteFor(3)">
                <div class="stat-icon">üèéÔ∏è</div>
                <div class="stat-label">Forza Horizon</div>
                <div class="vote-percentage" id="vote-3">20%</div>
            </div>
        </div>

        <!-- Barre de progression -->
        <div class="inter-progress">
            <div class="inter-progress-bar"></div>
        </div>
    </div>

    <!-- Footer -->
    <div class="inter-footer">
        üöõ <strong>routier87</strong> - Prochain d√©part dans <span id="next-departure">5 minutes</span> ‚Ä¢ Votez en tchat !
    </div>

    <script>
        // ===== CONFIGURATION =====
        const interConfig = {
            currentGame: "TrackMania Turbo",
            nextGames: [
                { name: "TrackMania", votes: 35, icon: "üöó" },
                { name: "Euro Truck Sim 2", votes: 45, icon: "üöö" },
                { name: "Forza Horizon 5", votes: 20, icon: "üèéÔ∏è" }
            ],
            streamTime: "2h 15m",
            viewers: 42,
            bestTime: "1:24.56",
            nextDeparture: 5 // minutes
        };

        // ===== INITIALISATION =====
        document.addEventListener('DOMContentLoaded', function() {
            console.log("üéÆ Sc√®ne Intermission routier87 charg√©e");
            
            // Mettre √† jour les statistiques
            updateStats();
            
            // Cr√©er les particules
            createParticles();
            
            // Animation des signaux routiers
            animateRoadSigns();
            
            // D√©marrer le compte √† rebours
            startNextDepartureTimer();
            
            // Simulation de votes al√©atoires
            simulateVotes();
        });

        // ===== FONCTIONS =====
        function updateStats() {
            document.getElementById('stat-game').textContent = interConfig.currentGame;
            document.getElementById('stat-time').textContent = interConfig.streamTime;
            document.getElementById('stat-viewers').textContent = interConfig.viewers;
            document.getElementById('stat-record').textContent = interConfig.bestTime;
            
            // Mettre √† jour les votes
            interConfig.nextGames.forEach((game, index) => {
                document.getElementById(`vote-${index + 1}`).textContent = `${game.votes}%`;
            });
        }

        function createParticles() {
            const container = document.getElementById('particles-container');
            const particleCount = 50;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.cssText = `
                    --x: ${Math.random()};
                    left: ${Math.random() * 100}%;
                    animation-delay: ${Math.random() * 10}s;
                    width: ${Math.random() * 8 + 4}px;
                    height: ${Math.random() * 8 + 4}px;
                    background: rgba(${Math.random() * 100 + 155}, ${Math.random() * 100 + 155}, 255, ${Math.random() * 0.3 + 0.1});
                `;
                container.appendChild(particle);
            }
        }

        function animateRoadSigns() {
            const signs = document.querySelectorAll('.road-sign');
            signs.forEach((sign, index) => {
                sign.style.cssText = `
                    position: absolute;
                    font-size: 3em;
                    animation: roadSignFloat 3s ease-in-out infinite ${index * 0.5}s;
                    filter: drop-shadow(0 0 10px rgba(255, 100, 0, 0.7));
                `;
                
                // Ajouter l'animation CSS
                const style = document.createElement('style');
                style.textContent = `
                    @keyframes roadSignFloat {
                        0%, 100% { transform: translateY(0) rotate(0deg); }
                        50% { transform: translateY(-20px) rotate(10deg); }
                    }
                `;
                document.head.appendChild(style);
            });
        }

        function voteFor(option) {
            // Augmenter les votes pour l'option choisie
            interConfig.nextGames[option - 1].votes += 5;
            
            // Recalculer les pourcentages
            const totalVotes = interConfig.nextGames.reduce((sum, game) => sum + game.votes, 0);
            interConfig.nextGames.forEach(game => {
                game.votes = Math.round((game.votes / totalVotes) * 100);
            });
            
            // Mettre √† jour l'affichage
            updateStats();
            
            // Effet visuel
            const voteElement = document.getElementById(`vote-${option}`);
            voteElement.style.transform = 'scale(1.3)';
            voteElement.style.color = '#4CAF50';
            
            setTimeout(() => {
                voteElement.style.transform = 'scale(1)';
                setTimeout(() => {
                    voteElement.style.color = '';
                }, 300);
            }, 300);
        }

        function simulateVotes() {
            // Simulation al√©atoire de votes
            setInterval(() => {
                const randomOption = Math.floor(Math.random() * 3) + 1;
                const randomChange = Math.random() > 0.5 ? 1 : -1;
                
                interConfig.nextGames[randomOption - 1].votes += randomChange;
                
                // S'assurer que les votes restent positifs
                interConfig.nextGames.forEach(game => {
                    if (game.votes < 0) game.votes = 0;
                    if (game.votes > 100) game.votes = 100;
                });
                
                // Recalculer les pourcentages
                const totalVotes = interConfig.nextGames.reduce((sum, game) => sum + game.votes, 0);
                if (totalVotes > 0) {
                    interConfig.nextGames.forEach(game => {
                        game.votes = Math.round((game.votes / totalVotes) * 100);
                    });
                }
                
                updateStats();
            }, 5000); // Toutes les 5 secondes
        }

        function startNextDepartureTimer() {
            let minutesLeft = interConfig.nextDeparture;
            const departureElement = document.getElementById('next-departure');
            
            const timer = setInterval(() => {
                minutesLeft--;
                
                if (minutesLeft >= 0) {
                    departureElement.textContent = `${minutesLeft} minute${minutesLeft > 1 ? 's' : ''}`;
                    
                    // Changement de couleur
                    if (minutesLeft <= 1) {
                        departureElement.style.color = '#FF4444';
                        departureElement.style.animation = 'pulse 1s infinite';
                    } else if (minutesLeft <= 3) {
                        departureElement.style.color = '#FFAA44';
                    }
                } else {
                    departureElement.textContent = 'MAINTENANT !';
                    departureElement.style.color = '#4CAF50';
                    clearInterval(timer);
                }
            }, 60000); // Toutes les minutes
        }

        // ===== RACCOURCIS CLAVIER =====
        document.addEventListener('keydown', function(e) {
            switch(e.key) {
                case '1': voteFor(1); break;
                case '2': voteFor(2); break;
                case '3': voteFor(3); break;
                case 'r': // Reset votes
                    interConfig.nextGames.forEach(game => game.votes = 33);
                    updateStats();
                    break;
                case 'ArrowUp': // Augmenter spectateurs
                    interConfig.viewers++;
                    updateStats();
                    break;
                case 'ArrowDown': // Diminuer spectateurs
                    if (interConfig.viewers > 0) interConfig.viewers--;
                    updateStats();
                    break;
            }
        });

        // ===== API POUR OBS =====
        window.INTERMISSION_SCENE = {
            getStats: () => interConfig,
            setViewers: (count) => {
                interConfig.viewers = count;
                updateStats();
            },
            setGame: (gameName) => {
                interConfig.currentGame = gameName;
                updateStats();
            },
            resetVotes: () => {
                interConfig.nextGames.forEach(game => game.votes = 33);
                updateStats();
            }
        };
    </script>
</body>
</html>
